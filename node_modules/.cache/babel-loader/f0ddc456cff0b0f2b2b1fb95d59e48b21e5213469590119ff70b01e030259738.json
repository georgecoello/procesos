{"ast":null,"code":"// src/services/aiService.js\nconst API_KEY = import.meta.env.VITE_OPENAI_API_KEY || '';\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\nexport class AIService {\n  constructor() {\n    this.apiKey = API_KEY;\n    this.isAvailable = !!this.apiKey;\n  }\n  async analyzeProcedimiento(texto) {\n    if (!this.isAvailable) {\n      throw new Error('API key no configurada. Configura VITE_OPENAI_API_KEY en .env');\n    }\n    const prompt = `Analiza el siguiente texto que describe un procedimiento empresarial. Extrae:\n1. Cada paso secuencial del procedimiento\n2. El responsable o rol de cada paso\n3. La actividad específica a realizar\n4. Detecta decisiones (preguntas sí/no), alternativas y finalizaciones\n\nFormato de respuesta JSON:\n{\n  \"pasos\": [\n    {\n      \"numero\": \"5.1\",\n      \"responsable\": \"Administrador\",\n      \"actividad\": \"Revisar lista de proveedores a pagar\",\n      \"tipo\": \"normal|decision|alternativa|fin\",\n      \"subpasos\": [\n        {\n          \"numero\": \"a\",\n          \"responsable\": \"Administrador\",\n          \"actividad\": \"Verificar documentos de respaldo\"\n        }\n      ]\n    }\n  ]\n}\n\nTexto del procedimiento:\n${texto}`;\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          // Puedes cambiar a gpt-4 si tienes acceso\n          messages: [{\n            role: 'system',\n            content: 'Eres un analista de procesos empresariales. Extrae información estructurada de descripciones de procedimientos.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          temperature: 0.3,\n          max_tokens: 2000\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`Error en API: ${response.status} - ${errorData.error?.message || 'Error desconocido'}`);\n      }\n      const data = await response.json();\n      const content = data.choices[0].message.content;\n\n      // Extraer JSON de la respuesta\n      const jsonMatch = content.match(/```json\\n([\\s\\S]*?)\\n```/) || content.match(/{[\\s\\S]*}/);\n      let jsonText;\n      if (jsonMatch) {\n        jsonText = jsonMatch[0].replace(/```json\\n|\\n```/g, '');\n      } else {\n        // Buscar cualquier objeto JSON en el texto\n        const jsonStart = content.indexOf('{');\n        const jsonEnd = content.lastIndexOf('}');\n        if (jsonStart !== -1 && jsonEnd !== -1) {\n          jsonText = content.substring(jsonStart, jsonEnd + 1);\n        } else {\n          throw new Error('No se encontró JSON en la respuesta');\n        }\n      }\n      return JSON.parse(jsonText);\n    } catch (error) {\n      console.error('Error en análisis de IA:', error);\n      throw error;\n    }\n  }\n  async generarSugerencia(seccion, contenidoActual = '') {\n    if (!this.isAvailable) {\n      return null;\n    }\n    const prompts = {\n      'objetivo': `Genera un objetivo profesional para un procedimiento administrativo. \n      El objetivo debe ser: Específico, Medible, Alcanzable, Relevante y con Tiempo definido (SMART).`,\n      'alcance': `Define el alcance apropiado para un procedimiento empresarial. \n      Incluye: Áreas/departamentos cubiertos, exclusiones claras, límites geográficos o funcionales.`,\n      'responsabilidades': `Lista los roles y responsabilidades típicas para un procedimiento empresarial. \n      Formato: 1. [Rol]: [Responsabilidad específica]`,\n      'normativa': `Menciona las normativas, políticas internas y regulaciones externas relevantes. \n      Incluye: Leyes aplicables, políticas de la empresa, estándares de calidad.`\n    };\n    const promptBase = prompts[seccion] || `Completa esta sección de un documento de procedimientos empresariales.`;\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [{\n            role: 'system',\n            content: 'Eres un consultor experto en documentación de procedimientos empresariales. Proporciona sugerencias profesionales y prácticas.'\n          }, {\n            role: 'user',\n            content: `${promptBase}\\n\\nContexto actual (puede estar vacío): ${contenidoActual}`\n          }],\n          temperature: 0.5,\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Error en API: ${response.status}`);\n      }\n      const data = await response.json();\n      return data.choices[0].message.content;\n    } catch (error) {\n      console.error('Error en generación de sugerencia:', error);\n      return null;\n    }\n  }\n  async mejorarTextoProcedimiento(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return texto;\n    }\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [{\n            role: 'system',\n            content: `Eres un editor experto en procedimientos empresariales. Mejora el texto siguiendo estas reglas:\n1. Claridad: Cada oración describe un solo paso\n2. Estructura: Usa lenguaje directo (sujeto + verbo + objeto)\n3. Responsables: Identifica claramente quién hace cada acción\n4. Formato: Incluye decisiones (¿...?) y alternativas (Si/No)\n5. Concisión: Elimina redundancias pero mantén precisión`\n          }, {\n            role: 'user',\n            content: `Mejora este texto de procedimiento para hacerlo más claro y estructurado:\\n\\n${texto}`\n          }],\n          temperature: 0.4,\n          max_tokens: 1500\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Error en API: ${response.status}`);\n      }\n      const data = await response.json();\n      return data.choices[0].message.content;\n    } catch (error) {\n      console.error('Error en mejora de texto:', error);\n      return texto;\n    }\n  }\n\n  // Nuevo método: Sugerir mejoras en tiempo real\n  async sugerirMejorasRapidas(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return [];\n    }\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [{\n            role: 'system',\n            content: 'Analiza el texto y sugiere 2-3 mejoras rápidas. Responde en formato JSON: {\"mejoras\": [\"sugerencia 1\", \"sugerencia 2\"]}'\n          }, {\n            role: 'user',\n            content: `Texto a mejorar: ${texto}`\n          }],\n          temperature: 0.3,\n          max_tokens: 300\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Error en API: ${response.status}`);\n      }\n      const data = await response.json();\n      const content = data.choices[0].message.content;\n      const jsonMatch = content.match(/{[\\s\\S]*}/);\n      if (jsonMatch) {\n        return JSON.parse(jsonMatch[0]).mejoras || [];\n      }\n      return [];\n    } catch (error) {\n      console.error('Error en sugerencias rápidas:', error);\n      return [];\n    }\n  }\n}\n\n// Instancia exportada\nexport const aiService = new AIService();","map":{"version":3,"names":["API_KEY","import","meta","env","VITE_OPENAI_API_KEY","API_URL","AIService","constructor","apiKey","isAvailable","analyzeProcedimiento","texto","Error","prompt","response","fetch","method","headers","body","JSON","stringify","model","messages","role","content","temperature","max_tokens","ok","errorData","json","status","error","message","data","choices","jsonMatch","match","jsonText","replace","jsonStart","indexOf","jsonEnd","lastIndexOf","substring","parse","console","generarSugerencia","seccion","contenidoActual","prompts","promptBase","mejorarTextoProcedimiento","trim","sugerirMejorasRapidas","mejoras","aiService"],"sources":["/home/jorge/Escritorio/Jorge-PC/procesos/procesos/src/services/aiService.js"],"sourcesContent":["// src/services/aiService.js\nconst API_KEY = import.meta.env.VITE_OPENAI_API_KEY || '';\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\n\nexport class AIService {\n  constructor() {\n    this.apiKey = API_KEY;\n    this.isAvailable = !!this.apiKey;\n  }\n\n  async analyzeProcedimiento(texto) {\n    if (!this.isAvailable) {\n      throw new Error('API key no configurada. Configura VITE_OPENAI_API_KEY en .env');\n    }\n\n    const prompt = `Analiza el siguiente texto que describe un procedimiento empresarial. Extrae:\n1. Cada paso secuencial del procedimiento\n2. El responsable o rol de cada paso\n3. La actividad específica a realizar\n4. Detecta decisiones (preguntas sí/no), alternativas y finalizaciones\n\nFormato de respuesta JSON:\n{\n  \"pasos\": [\n    {\n      \"numero\": \"5.1\",\n      \"responsable\": \"Administrador\",\n      \"actividad\": \"Revisar lista de proveedores a pagar\",\n      \"tipo\": \"normal|decision|alternativa|fin\",\n      \"subpasos\": [\n        {\n          \"numero\": \"a\",\n          \"responsable\": \"Administrador\",\n          \"actividad\": \"Verificar documentos de respaldo\"\n        }\n      ]\n    }\n  ]\n}\n\nTexto del procedimiento:\n${texto}`;\n\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo', // Puedes cambiar a gpt-4 si tienes acceso\n          messages: [\n            {\n              role: 'system',\n              content: 'Eres un analista de procesos empresariales. Extrae información estructurada de descripciones de procedimientos.'\n            },\n            {\n              role: 'user',\n              content: prompt\n            }\n          ],\n          temperature: 0.3,\n          max_tokens: 2000\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`Error en API: ${response.status} - ${errorData.error?.message || 'Error desconocido'}`);\n      }\n\n      const data = await response.json();\n      const content = data.choices[0].message.content;\n      \n      // Extraer JSON de la respuesta\n      const jsonMatch = content.match(/```json\\n([\\s\\S]*?)\\n```/) || content.match(/{[\\s\\S]*}/);\n      let jsonText;\n      \n      if (jsonMatch) {\n        jsonText = jsonMatch[0].replace(/```json\\n|\\n```/g, '');\n      } else {\n        // Buscar cualquier objeto JSON en el texto\n        const jsonStart = content.indexOf('{');\n        const jsonEnd = content.lastIndexOf('}');\n        if (jsonStart !== -1 && jsonEnd !== -1) {\n          jsonText = content.substring(jsonStart, jsonEnd + 1);\n        } else {\n          throw new Error('No se encontró JSON en la respuesta');\n        }\n      }\n      \n      return JSON.parse(jsonText);\n    } catch (error) {\n      console.error('Error en análisis de IA:', error);\n      throw error;\n    }\n  }\n\n  async generarSugerencia(seccion, contenidoActual = '') {\n    if (!this.isAvailable) {\n      return null;\n    }\n\n    const prompts = {\n      'objetivo': `Genera un objetivo profesional para un procedimiento administrativo. \n      El objetivo debe ser: Específico, Medible, Alcanzable, Relevante y con Tiempo definido (SMART).`,\n      \n      'alcance': `Define el alcance apropiado para un procedimiento empresarial. \n      Incluye: Áreas/departamentos cubiertos, exclusiones claras, límites geográficos o funcionales.`,\n      \n      'responsabilidades': `Lista los roles y responsabilidades típicas para un procedimiento empresarial. \n      Formato: 1. [Rol]: [Responsabilidad específica]`,\n      \n      'normativa': `Menciona las normativas, políticas internas y regulaciones externas relevantes. \n      Incluye: Leyes aplicables, políticas de la empresa, estándares de calidad.`\n    };\n\n    const promptBase = prompts[seccion] || `Completa esta sección de un documento de procedimientos empresariales.`;\n\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [\n            {\n              role: 'system',\n              content: 'Eres un consultor experto en documentación de procedimientos empresariales. Proporciona sugerencias profesionales y prácticas.'\n            },\n            {\n              role: 'user',\n              content: `${promptBase}\\n\\nContexto actual (puede estar vacío): ${contenidoActual}`\n            }\n          ],\n          temperature: 0.5,\n          max_tokens: 500\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error en API: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return data.choices[0].message.content;\n    } catch (error) {\n      console.error('Error en generación de sugerencia:', error);\n      return null;\n    }\n  }\n\n  async mejorarTextoProcedimiento(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return texto;\n    }\n\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [\n            {\n              role: 'system',\n              content: `Eres un editor experto en procedimientos empresariales. Mejora el texto siguiendo estas reglas:\n1. Claridad: Cada oración describe un solo paso\n2. Estructura: Usa lenguaje directo (sujeto + verbo + objeto)\n3. Responsables: Identifica claramente quién hace cada acción\n4. Formato: Incluye decisiones (¿...?) y alternativas (Si/No)\n5. Concisión: Elimina redundancias pero mantén precisión`\n            },\n            {\n              role: 'user',\n              content: `Mejora este texto de procedimiento para hacerlo más claro y estructurado:\\n\\n${texto}`\n            }\n          ],\n          temperature: 0.4,\n          max_tokens: 1500\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error en API: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return data.choices[0].message.content;\n    } catch (error) {\n      console.error('Error en mejora de texto:', error);\n      return texto;\n    }\n  }\n\n  // Nuevo método: Sugerir mejoras en tiempo real\n  async sugerirMejorasRapidas(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return [];\n    }\n\n    try {\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [\n            {\n              role: 'system',\n              content: 'Analiza el texto y sugiere 2-3 mejoras rápidas. Responde en formato JSON: {\"mejoras\": [\"sugerencia 1\", \"sugerencia 2\"]}'\n            },\n            {\n              role: 'user',\n              content: `Texto a mejorar: ${texto}`\n            }\n          ],\n          temperature: 0.3,\n          max_tokens: 300\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error en API: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const content = data.choices[0].message.content;\n      const jsonMatch = content.match(/{[\\s\\S]*}/);\n      \n      if (jsonMatch) {\n        return JSON.parse(jsonMatch[0]).mejoras || [];\n      }\n      \n      return [];\n    } catch (error) {\n      console.error('Error en sugerencias rápidas:', error);\n      return [];\n    }\n  }\n}\n\n// Instancia exportada\nexport const aiService = new AIService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}