{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\n// src/hard-break.ts\nimport { mergeAttributes, Node } from \"@tiptap/core\";\nvar HardBreak = Node.create({\n  name: \"hardBreak\",\n  markdownTokenName: \"br\",\n  addOptions() {\n    return {\n      keepMarks: true,\n      HTMLAttributes: {}\n    };\n  },\n  inline: true,\n  group: \"inline\",\n  selectable: false,\n  linebreakReplacement: true,\n  parseHTML() {\n    return [{\n      tag: \"br\"\n    }];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    return [\"br\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\n  },\n  renderText() {\n    return \"\\n\";\n  },\n  renderMarkdown: () => `  \n`,\n  parseMarkdown: () => {\n    return {\n      type: \"hardBreak\"\n    };\n  },\n  addCommands() {\n    return {\n      setHardBreak: () => ({\n        commands,\n        chain,\n        state,\n        editor\n      }) => {\n        return commands.first([() => commands.exitCode(), () => commands.command(() => {\n          const {\n            selection,\n            storedMarks\n          } = state;\n          if (selection.$from.parent.type.spec.isolating) {\n            return false;\n          }\n          const {\n            keepMarks\n          } = this.options;\n          const {\n            splittableMarks\n          } = editor.extensionManager;\n          const marks = storedMarks || selection.$to.parentOffset && selection.$from.marks();\n          return chain().insertContent({\n            type: this.name\n          }).command(({\n            tr,\n            dispatch\n          }) => {\n            if (dispatch && marks && keepMarks) {\n              const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name));\n              tr.ensureMarks(filteredMarks);\n            }\n            return true;\n          }).run();\n        })]);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-Enter\": () => this.editor.commands.setHardBreak(),\n      \"Shift-Enter\": () => this.editor.commands.setHardBreak()\n    };\n  }\n});\n\n// src/index.ts\nvar index_default = HardBreak;\nexport { HardBreak, index_default as default };","map":{"version":3,"names":["mergeAttributes","Node","HardBreak","create","name","markdownTokenName","addOptions","keepMarks","HTMLAttributes","inline","group","selectable","linebreakReplacement","parseHTML","tag","renderHTML","options","renderText","renderMarkdown","parseMarkdown","type","addCommands","setHardBreak","commands","chain","state","editor","first","exitCode","command","selection","storedMarks","$from","parent","spec","isolating","splittableMarks","extensionManager","marks","$to","parentOffset","insertContent","tr","dispatch","filteredMarks","filter","mark","includes","ensureMarks","run","addKeyboardShortcuts","Mod-Enter","Shift-Enter","index_default"],"sources":["../src/hard-break.ts","../src/index.ts"],"sourcesContent":["import { mergeAttributes, Node } from '@tiptap/core'\n\nexport interface HardBreakOptions {\n  /**\n   * Controls if marks should be kept after being split by a hard break.\n   * @default true\n   * @example false\n   */\n  keepMarks: boolean\n\n  /**\n   * HTML attributes to add to the hard break element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    hardBreak: {\n      /**\n       * Add a hard break\n       * @example editor.commands.setHardBreak()\n       */\n      setHardBreak: () => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to insert hard breaks.\n * @see https://www.tiptap.dev/api/nodes/hard-break\n */\nexport const HardBreak = Node.create<HardBreakOptions>({\n  name: 'hardBreak',\n\n  markdownTokenName: 'br',\n\n  addOptions() {\n    return {\n      keepMarks: true,\n      HTMLAttributes: {},\n    }\n  },\n\n  inline: true,\n\n  group: 'inline',\n\n  selectable: false,\n\n  linebreakReplacement: true,\n\n  parseHTML() {\n    return [{ tag: 'br' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['br', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]\n  },\n\n  renderText() {\n    return '\\n'\n  },\n\n  renderMarkdown: () => `  \\n`,\n\n  parseMarkdown: () => {\n    return {\n      type: 'hardBreak',\n    }\n  },\n\n  addCommands() {\n    return {\n      setHardBreak:\n        () =>\n        ({ commands, chain, state, editor }) => {\n          return commands.first([\n            () => commands.exitCode(),\n            () =>\n              commands.command(() => {\n                const { selection, storedMarks } = state\n\n                if (selection.$from.parent.type.spec.isolating) {\n                  return false\n                }\n\n                const { keepMarks } = this.options\n                const { splittableMarks } = editor.extensionManager\n                const marks = storedMarks || (selection.$to.parentOffset && selection.$from.marks())\n\n                return chain()\n                  .insertContent({ type: this.name })\n                  .command(({ tr, dispatch }) => {\n                    if (dispatch && marks && keepMarks) {\n                      const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name))\n\n                      tr.ensureMarks(filteredMarks)\n                    }\n\n                    return true\n                  })\n                  .run()\n              }),\n          ])\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Enter': () => this.editor.commands.setHardBreak(),\n      'Shift-Enter': () => this.editor.commands.setHardBreak(),\n    }\n  },\n})\n","import { HardBreak } from './hard-break.js'\n\nexport * from './hard-break.js'\n\nexport default HardBreak\n"],"mappings":";;;AAAA,SAASA,eAAA,EAAiBC,IAAA,QAAY;AAkC/B,IAAMC,SAAA,GAAYD,IAAA,CAAKE,MAAA,CAAyB;EACrDC,IAAA,EAAM;EAENC,iBAAA,EAAmB;EAEnBC,WAAA,EAAa;IACX,OAAO;MACLC,SAAA,EAAW;MACXC,cAAA,EAAgB,CAAC;IACnB;EACF;EAEAC,MAAA,EAAQ;EAERC,KAAA,EAAO;EAEPC,UAAA,EAAY;EAEZC,oBAAA,EAAsB;EAEtBC,UAAA,EAAY;IACV,OAAO,CAAC;MAAEC,GAAA,EAAK;IAAK,CAAC;EACvB;EAEAC,WAAW;IAAEP;EAAe,GAAG;IAC7B,OAAO,CAAC,MAAMR,eAAA,CAAgB,KAAKgB,OAAA,CAAQR,cAAA,EAAgBA,cAAc,CAAC;EAC5E;EAEAS,WAAA,EAAa;IACX,OAAO;EACT;EAEAC,cAAA,EAAgBA,CAAA,KAAM;AAAA;EAEtBC,aAAA,EAAeA,CAAA,KAAM;IACnB,OAAO;MACLC,IAAA,EAAM;IACR;EACF;EAEAC,YAAA,EAAc;IACZ,OAAO;MACLC,YAAA,EACEA,CAAA,KACA,CAAC;QAAEC,QAAA;QAAUC,KAAA;QAAOC,KAAA;QAAOC;MAAO,MAAM;QACtC,OAAOH,QAAA,CAASI,KAAA,CAAM,CACpB,MAAMJ,QAAA,CAASK,QAAA,CAAS,GACxB,MACEL,QAAA,CAASM,OAAA,CAAQ,MAAM;UACrB,MAAM;YAAEC,SAAA;YAAWC;UAAY,IAAIN,KAAA;UAEnC,IAAIK,SAAA,CAAUE,KAAA,CAAMC,MAAA,CAAOb,IAAA,CAAKc,IAAA,CAAKC,SAAA,EAAW;YAC9C,OAAO;UACT;UAEA,MAAM;YAAE5B;UAAU,IAAI,KAAKS,OAAA;UAC3B,MAAM;YAAEoB;UAAgB,IAAIV,MAAA,CAAOW,gBAAA;UACnC,MAAMC,KAAA,GAAQP,WAAA,IAAgBD,SAAA,CAAUS,GAAA,CAAIC,YAAA,IAAgBV,SAAA,CAAUE,KAAA,CAAMM,KAAA,CAAM;UAElF,OAAOd,KAAA,CAAM,EACViB,aAAA,CAAc;YAAErB,IAAA,EAAM,KAAKhB;UAAK,CAAC,EACjCyB,OAAA,CAAQ,CAAC;YAAEa,EAAA;YAAIC;UAAS,MAAM;YAC7B,IAAIA,QAAA,IAAYL,KAAA,IAAS/B,SAAA,EAAW;cAClC,MAAMqC,aAAA,GAAgBN,KAAA,CAAMO,MAAA,CAAOC,IAAA,IAAQV,eAAA,CAAgBW,QAAA,CAASD,IAAA,CAAK1B,IAAA,CAAKhB,IAAI,CAAC;cAEnFsC,EAAA,CAAGM,WAAA,CAAYJ,aAAa;YAC9B;YAEA,OAAO;UACT,CAAC,EACAK,GAAA,CAAI;QACT,CAAC,EACJ;MACH;IACJ;EACF;EAEAC,qBAAA,EAAuB;IACrB,OAAO;MACL,aAAaC,CAAA,KAAM,KAAKzB,MAAA,CAAOH,QAAA,CAASD,YAAA,CAAa;MACrD,eAAe8B,CAAA,KAAM,KAAK1B,MAAA,CAAOH,QAAA,CAASD,YAAA,CAAa;IACzD;EACF;AACF,CAAC;;;ACjHD,IAAO+B,aAAA,GAAQnD,SAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}