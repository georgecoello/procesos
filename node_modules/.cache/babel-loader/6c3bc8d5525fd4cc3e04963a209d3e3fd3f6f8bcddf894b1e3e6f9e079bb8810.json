{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\n// src/services/aiService.js\n// Versi√≥n simplificada para Vercel\n\nconsole.log('=== AI Service Initializing ===');\n\n// Obtener variables de entorno del objeto window.__env\nconst getEnv = keyVariants => {\n  try {\n    // Primero buscar en window.__env (nuestra configuraci√≥n)\n    if (typeof window !== 'undefined' && window.__env) {\n      console.log('Checking window.__env...');\n      for (const k of keyVariants) {\n        const value = window.__env[k];\n        if (value && value !== '' && value !== 'undefined') {\n          console.log(`‚úì Found ${k} in window.__env`);\n          return value;\n        }\n      }\n    }\n\n    // Buscar directamente en window (para Vercel)\n    if (typeof window !== 'undefined') {\n      console.log('Checking window object directly...');\n      for (const k of keyVariants) {\n        const value = window[k];\n        if (value && value !== '' && value !== 'undefined') {\n          console.log(`‚úì Found ${k} in window`);\n          return value;\n        }\n      }\n    }\n\n    // Buscar en import.meta.env (para desarrollo local con Vite)\n    if (typeof import.meta !== 'undefined' && import.meta.env) {\n      console.log('Checking import.meta.env...');\n      for (const k of keyVariants) {\n        const value = import.meta.env[k];\n        if (value && value !== '' && value !== 'undefined') {\n          console.log(`‚úì Found ${k} in import.meta.env`);\n          return value;\n        }\n      }\n    }\n    console.log(`‚úó No env found for keys: ${keyVariants.join(', ')}`);\n    return '';\n  } catch (error) {\n    console.error('Error reading environment:', error);\n    return '';\n  }\n};\n\n// Configuraci√≥n con valores por defecto\nconst AI_PROVIDER = getEnv(['VITE_AI_PROVIDER']) || 'groq';\nconst GROQ_KEY = getEnv(['VITE_GROQ_API_KEY']) || '';\nconst GROQ_URL = getEnv(['VITE_GROQ_API_URL']) || 'https://api.groq.com/openai/v1/chat/completions';\nconst GROQ_MODEL = getEnv(['VITE_GROQ_MODEL']) || 'mixtral-8x7b-32768';\n\n// Log de configuraci√≥n\nconsole.log('=== AI Configuration ===');\nconsole.log('Provider:', AI_PROVIDER);\nconsole.log('Groq Key present:', GROQ_KEY ? `Yes (${GROQ_KEY.substring(0, 10)}...)` : 'No');\nconsole.log('Groq URL:', GROQ_URL);\nconsole.log('Groq Model:', GROQ_MODEL);\nconsole.log('========================');\nexport class AIService {\n  constructor() {\n    console.log('=== Creating AIService ===');\n    this.provider = AI_PROVIDER;\n    this.groqKey = GROQ_KEY;\n    this.groqUrl = GROQ_URL;\n    this.groqModel = GROQ_MODEL;\n    this.isAvailable = this.checkAvailability();\n    if (this.isAvailable) {\n      console.log('‚úÖ AIService initialized successfully');\n      console.log(`Using provider: ${this.provider}`);\n      console.log(`Model: ${this.groqModel}`);\n    } else {\n      console.error('‚ùå AIService initialization failed');\n      console.error('Reason: Missing or invalid API key');\n      console.error('Expected: VITE_GROQ_API_KEY in window.__env');\n      console.error('Current window.__env:', window.__env || 'Not defined');\n    }\n  }\n  checkAvailability() {\n    if (this.provider === 'groq') {\n      const hasKey = this.groqKey && this.groqKey.length > 30;\n      const isValidKey = this.groqKey && this.groqKey.startsWith('gsk_');\n      if (hasKey && isValidKey) {\n        console.log('‚úÖ Groq service is available');\n        return true;\n      } else {\n        console.warn('‚ùå Groq service NOT available');\n        if (!this.groqKey) {\n          console.warn('- Missing API key');\n        } else if (this.groqKey.length < 30) {\n          console.warn('- API key too short');\n        } else if (!this.groqKey.startsWith('gsk_')) {\n          console.warn('- API key should start with gsk_');\n        }\n        return false;\n      }\n    }\n    console.warn(`‚ùå Unknown provider: ${this.provider}`);\n    return false;\n  }\n\n  // M√©todo principal para enviar prompts\n  async sendPrompt(prompt, options = {}) {\n    if (!this.isAvailable) {\n      const errorMsg = 'IA no configurada. Por favor, configura tu API key de Groq.';\n      console.error(errorMsg);\n      throw new Error(errorMsg);\n    }\n    console.log('üì§ Sending prompt to Groq...');\n    console.log('Prompt length:', prompt.length);\n    const messages = [{\n      role: 'system',\n      content: options.systemPrompt || 'Eres un asistente √∫til especializado en redacci√≥n de documentos empresariales.'\n    }, {\n      role: 'user',\n      content: prompt\n    }];\n    const body = {\n      messages,\n      model: options.model || this.groqModel,\n      temperature: options.temperature ?? 0.3,\n      max_tokens: options.max_tokens || 2000,\n      stream: false\n    };\n    try {\n      const response = await fetch(this.groqUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.groqKey}`,\n          'User-Agent': 'ProcedimientosApp/1.0'\n        },\n        body: JSON.stringify(body)\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', response.status, errorText);\n        throw new Error(`Error Groq API: ${response.status}`);\n      }\n      const data = await response.json();\n      const content = data.choices?.[0]?.message?.content || data.content || data.result || JSON.stringify(data);\n      console.log('‚úÖ Response received');\n      return content;\n    } catch (error) {\n      console.error('Error calling Groq API:', error);\n      throw error;\n    }\n  }\n\n  // Analizar procedimiento\n  async analyzeProcedimiento(texto) {\n    if (!this.isAvailable) {\n      throw new Error('API key no configurada.');\n    }\n    const prompt = `Analiza el siguiente texto que describe un procedimiento empresarial. Extrae pasos, responsables y actividades.\n\nFormato JSON:\n{\n  \"pasos\": [\n    {\n      \"numero\": \"5.1\",\n      \"responsable\": \"Administrador\",\n      \"actividad\": \"Revisar lista\",\n      \"tipo\": \"normal\"\n    }\n  ]\n}\n\nTexto: ${texto}`;\n    const content = await this.sendPrompt(prompt, {\n      temperature: 0.3,\n      max_tokens: 3000\n    });\n\n    // Extraer JSON\n    const jsonMatch = (content || '').match(/```json\\n([\\s\\S]*?)\\n```/) || (content || '').match(/{[\\s\\S]*}/);\n    let jsonText = '';\n    if (jsonMatch) {\n      jsonText = jsonMatch[0].replace(/```json\\n|\\n```/g, '');\n    } else {\n      const jsonStart = (content || '').indexOf('{');\n      const jsonEnd = (content || '').lastIndexOf('}');\n      if (jsonStart !== -1 && jsonEnd !== -1) {\n        jsonText = (content || '').substring(jsonStart, jsonEnd + 1);\n      }\n    }\n    try {\n      return JSON.parse(jsonText);\n    } catch (error) {\n      console.error('Error parsing JSON:', error);\n      return {\n        pasos: []\n      };\n    }\n  }\n\n  // Mejorar texto\n  async mejorarTextoProcedimiento(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return texto;\n    }\n    const prompt = `Mejora este texto para un documento empresarial:\n${texto}`;\n    try {\n      const content = await this.sendPrompt(prompt, {\n        temperature: 0.4,\n        max_tokens: 2000\n      });\n      return content || texto;\n    } catch (error) {\n      console.error('Error improving text:', error);\n      return texto;\n    }\n  }\n\n  // Sugerir mejoras r√°pidas\n  async sugerirMejorasRapidas(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return [];\n    }\n    const prompt = `Sugiere 2-3 mejoras para este texto: \"${texto}\"`;\n    try {\n      const content = await this.sendPrompt(prompt, {\n        temperature: 0.3,\n        max_tokens: 300\n      });\n      const lines = (content || '').split('\\n').filter(line => line.trim());\n      return lines.slice(0, 3);\n    } catch (error) {\n      console.error('Error generating suggestions:', error);\n      return [];\n    }\n  }\n}\n\n// Instancia exportada\nexport const aiService = new AIService();","map":{"version":3,"names":["console","log","getEnv","keyVariants","window","__env","k","value","import","meta","env","join","error","AI_PROVIDER","GROQ_KEY","GROQ_URL","GROQ_MODEL","substring","AIService","constructor","provider","groqKey","groqUrl","groqModel","isAvailable","checkAvailability","hasKey","length","isValidKey","startsWith","warn","sendPrompt","prompt","options","errorMsg","Error","messages","role","content","systemPrompt","body","model","temperature","max_tokens","stream","response","fetch","method","headers","JSON","stringify","ok","errorText","text","status","data","json","choices","message","result","analyzeProcedimiento","texto","jsonMatch","match","jsonText","replace","jsonStart","indexOf","jsonEnd","lastIndexOf","parse","pasos","mejorarTextoProcedimiento","trim","sugerirMejorasRapidas","lines","split","filter","line","slice","aiService"],"sources":["/home/jorge/Escritorio/Jorge-PC/procesos/procesos/src/services/aiService.js"],"sourcesContent":["// src/services/aiService.js\n// Versi√≥n simplificada para Vercel\n\nconsole.log('=== AI Service Initializing ===');\n\n// Obtener variables de entorno del objeto window.__env\nconst getEnv = (keyVariants) => {\n  try {\n    // Primero buscar en window.__env (nuestra configuraci√≥n)\n    if (typeof window !== 'undefined' && window.__env) {\n      console.log('Checking window.__env...');\n      for (const k of keyVariants) {\n        const value = window.__env[k];\n        if (value && value !== '' && value !== 'undefined') {\n          console.log(`‚úì Found ${k} in window.__env`);\n          return value;\n        }\n      }\n    }\n    \n    // Buscar directamente en window (para Vercel)\n    if (typeof window !== 'undefined') {\n      console.log('Checking window object directly...');\n      for (const k of keyVariants) {\n        const value = window[k];\n        if (value && value !== '' && value !== 'undefined') {\n          console.log(`‚úì Found ${k} in window`);\n          return value;\n        }\n      }\n    }\n    \n    // Buscar en import.meta.env (para desarrollo local con Vite)\n    if (typeof import.meta !== 'undefined' && import.meta.env) {\n      console.log('Checking import.meta.env...');\n      for (const k of keyVariants) {\n        const value = import.meta.env[k];\n        if (value && value !== '' && value !== 'undefined') {\n          console.log(`‚úì Found ${k} in import.meta.env`);\n          return value;\n        }\n      }\n    }\n    \n    console.log(`‚úó No env found for keys: ${keyVariants.join(', ')}`);\n    return '';\n    \n  } catch (error) {\n    console.error('Error reading environment:', error);\n    return '';\n  }\n};\n\n// Configuraci√≥n con valores por defecto\nconst AI_PROVIDER = getEnv(['VITE_AI_PROVIDER']) || 'groq';\nconst GROQ_KEY = getEnv(['VITE_GROQ_API_KEY']) || '';\nconst GROQ_URL = getEnv(['VITE_GROQ_API_URL']) || 'https://api.groq.com/openai/v1/chat/completions';\nconst GROQ_MODEL = getEnv(['VITE_GROQ_MODEL']) || 'mixtral-8x7b-32768';\n\n// Log de configuraci√≥n\nconsole.log('=== AI Configuration ===');\nconsole.log('Provider:', AI_PROVIDER);\nconsole.log('Groq Key present:', GROQ_KEY ? `Yes (${GROQ_KEY.substring(0, 10)}...)` : 'No');\nconsole.log('Groq URL:', GROQ_URL);\nconsole.log('Groq Model:', GROQ_MODEL);\nconsole.log('========================');\n\nexport class AIService {\n  constructor() {\n    console.log('=== Creating AIService ===');\n    \n    this.provider = AI_PROVIDER;\n    this.groqKey = GROQ_KEY;\n    this.groqUrl = GROQ_URL;\n    this.groqModel = GROQ_MODEL;\n    \n    this.isAvailable = this.checkAvailability();\n    \n    if (this.isAvailable) {\n      console.log('‚úÖ AIService initialized successfully');\n      console.log(`Using provider: ${this.provider}`);\n      console.log(`Model: ${this.groqModel}`);\n    } else {\n      console.error('‚ùå AIService initialization failed');\n      console.error('Reason: Missing or invalid API key');\n      console.error('Expected: VITE_GROQ_API_KEY in window.__env');\n      console.error('Current window.__env:', window.__env || 'Not defined');\n    }\n  }\n\n  checkAvailability() {\n    if (this.provider === 'groq') {\n      const hasKey = this.groqKey && this.groqKey.length > 30;\n      const isValidKey = this.groqKey && this.groqKey.startsWith('gsk_');\n      \n      if (hasKey && isValidKey) {\n        console.log('‚úÖ Groq service is available');\n        return true;\n      } else {\n        console.warn('‚ùå Groq service NOT available');\n        if (!this.groqKey) {\n          console.warn('- Missing API key');\n        } else if (this.groqKey.length < 30) {\n          console.warn('- API key too short');\n        } else if (!this.groqKey.startsWith('gsk_')) {\n          console.warn('- API key should start with gsk_');\n        }\n        return false;\n      }\n    }\n    \n    console.warn(`‚ùå Unknown provider: ${this.provider}`);\n    return false;\n  }\n\n  // M√©todo principal para enviar prompts\n  async sendPrompt(prompt, options = {}) {\n    if (!this.isAvailable) {\n      const errorMsg = 'IA no configurada. Por favor, configura tu API key de Groq.';\n      console.error(errorMsg);\n      throw new Error(errorMsg);\n    }\n\n    console.log('üì§ Sending prompt to Groq...');\n    console.log('Prompt length:', prompt.length);\n\n    const messages = [\n      { \n        role: 'system', \n        content: options.systemPrompt || 'Eres un asistente √∫til especializado en redacci√≥n de documentos empresariales.'\n      },\n      { role: 'user', content: prompt }\n    ];\n\n    const body = {\n      messages,\n      model: options.model || this.groqModel,\n      temperature: options.temperature ?? 0.3,\n      max_tokens: options.max_tokens || 2000,\n      stream: false\n    };\n\n    try {\n      const response = await fetch(this.groqUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.groqKey}`,\n          'User-Agent': 'ProcedimientosApp/1.0'\n        },\n        body: JSON.stringify(body)\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Groq API error:', response.status, errorText);\n        throw new Error(`Error Groq API: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const content = data.choices?.[0]?.message?.content || \n                     data.content || \n                     data.result || \n                     JSON.stringify(data);\n      \n      console.log('‚úÖ Response received');\n      return content;\n      \n    } catch (error) {\n      console.error('Error calling Groq API:', error);\n      throw error;\n    }\n  }\n\n  // Analizar procedimiento\n  async analyzeProcedimiento(texto) {\n    if (!this.isAvailable) {\n      throw new Error('API key no configurada.');\n    }\n\n    const prompt = `Analiza el siguiente texto que describe un procedimiento empresarial. Extrae pasos, responsables y actividades.\n\nFormato JSON:\n{\n  \"pasos\": [\n    {\n      \"numero\": \"5.1\",\n      \"responsable\": \"Administrador\",\n      \"actividad\": \"Revisar lista\",\n      \"tipo\": \"normal\"\n    }\n  ]\n}\n\nTexto: ${texto}`;\n\n    const content = await this.sendPrompt(prompt, { \n      temperature: 0.3, \n      max_tokens: 3000 \n    });\n\n    // Extraer JSON\n    const jsonMatch = (content || '').match(/```json\\n([\\s\\S]*?)\\n```/) || \n                     (content || '').match(/{[\\s\\S]*}/);\n    \n    let jsonText = '';\n    if (jsonMatch) {\n      jsonText = jsonMatch[0].replace(/```json\\n|\\n```/g, '');\n    } else {\n      const jsonStart = (content || '').indexOf('{');\n      const jsonEnd = (content || '').lastIndexOf('}');\n      if (jsonStart !== -1 && jsonEnd !== -1) {\n        jsonText = (content || '').substring(jsonStart, jsonEnd + 1);\n      }\n    }\n\n    try {\n      return JSON.parse(jsonText);\n    } catch (error) {\n      console.error('Error parsing JSON:', error);\n      return { pasos: [] };\n    }\n  }\n\n  // Mejorar texto\n  async mejorarTextoProcedimiento(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return texto;\n    }\n\n    const prompt = `Mejora este texto para un documento empresarial:\n${texto}`;\n\n    try {\n      const content = await this.sendPrompt(prompt, { \n        temperature: 0.4, \n        max_tokens: 2000 \n      });\n      return content || texto;\n    } catch (error) {\n      console.error('Error improving text:', error);\n      return texto;\n    }\n  }\n\n  // Sugerir mejoras r√°pidas\n  async sugerirMejorasRapidas(texto) {\n    if (!this.isAvailable || !texto.trim()) {\n      return [];\n    }\n\n    const prompt = `Sugiere 2-3 mejoras para este texto: \"${texto}\"`;\n\n    try {\n      const content = await this.sendPrompt(prompt, { \n        temperature: 0.3, \n        max_tokens: 300 \n      });\n      \n      const lines = (content || '').split('\\n').filter(line => line.trim());\n      return lines.slice(0, 3);\n    } catch (error) {\n      console.error('Error generating suggestions:', error);\n      return [];\n    }\n  }\n}\n\n// Instancia exportada\nexport const aiService = new AIService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}